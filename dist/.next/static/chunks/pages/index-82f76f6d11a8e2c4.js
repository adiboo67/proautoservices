(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7229)}])},4613:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(5893),r=n(5378),s=n.n(r);function a(e){let{children:t,title:n="ProAutoServices"}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s(),{children:[(0,i.jsx)("title",{children:n}),(0,i.jsx)("meta",{name:"description",content:"Application de gestion de garage automobile"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)("main",{children:t})]})}},9008:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});let i=(0,n(6490).eI)("https://pjxtjkmqgkbisgfleaps.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBqeHRqa21xZ2tiaXNnZmxlYXBzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzYxOTAzMzAsImV4cCI6MjA1MTc2NjMzMH0.UjKK4kSJDapIRx0iJvdHiJZzMbi99tDx52FmSq4qyfE",{auth:{persistSession:!0,autoRefreshToken:!0}})},7229:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n(5893),r=n(7294),s=n(1163),a=n(4613),c=n(9008);function o(){let e=(0,s.useRouter)();(0,r.useEffect)(()=>{t()},[]);let t=async()=>{try{let{data:{session:t}}=await c.O.auth.getSession();if(!t){e.push("/auth/login");return}let{data:n,error:i}=await c.O.from("users").select("*").eq("id",t.user.id).single();if(i){console.error("Error fetching user data:",i),e.push("/auth/login");return}if(!n){console.error("No user data found"),e.push("/auth/login");return}switch(n.role){case"admin":e.push("/admin/dashboard");break;case"secretary":e.push("/secretary/dashboard");break;case"mechanic":e.push("/mechanic/dashboard");break;default:e.push("/auth/login")}}catch(t){console.error("Error in checkUser:",t),e.push("/auth/login")}};return(0,i.jsx)(a.Z,{title:"Accueil - ProAutoServices",children:(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-blue-500 mx-auto"}),(0,i.jsx)("h2",{className:"mt-4 text-xl font-semibold text-gray-700",children:"Chargement..."})]})})})}},5378:function(e,t,n){e.exports=n(4764)}},function(e){e.O(0,[574,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);