(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{2962:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/appointments",function(){return t(7078)}])},6530:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var n=t(5893),i=t(7294),r=t(1163),a=t(9008);function l(e){let{children:s,allowedRoles:t}=e,l=(0,r.useRouter)(),[c,o]=(0,i.useState)(!0);async function u(){try{let{data:{session:e}}=await a.O.auth.getSession();if(!e){l.push("/auth/login");return}if(t){let{data:s}=await a.O.from("users").select("role").eq("id",e.user.id).single();if(!s||!t.includes(s.role)){l.push("/");return}}}catch(e){console.error("Error checking auth:",e),l.push("/auth/login")}finally{o(!1)}}return((0,i.useEffect)(()=>{u()},[]),c)?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):(0,n.jsx)(n.Fragment,{children:s})}},4645:function(e,s,t){"use strict";t.d(s,{Z:function(){return o}});var n=t(5893),i=t(7294),r=t(1163),a=t(9008),l=t(2920);function c(){return(0,n.jsx)("div",{className:"flex justify-center items-center p-4",children:(0,n.jsx)("img",{src:"/images/mechanic-duck.png.png",alt:"M\xe9canicien",className:"w-48 h-48 object-contain",style:{maxWidth:"100%",height:"auto"}})})}function o(e){let{children:s,title:t}=e,o=(0,r.useRouter)(),[u,d]=(0,i.useState)(!1),[m,x]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{let{data:{user:e}}=await a.O.auth.getUser();if(e){let{data:s,error:t}=await a.O.from("users").select("full_name").eq("id",e.id).single();s&&s.full_name?x(s.full_name):x(e.email||null)}})()},[]);let h=async()=>{try{let{error:e}=await a.O.auth.signOut();if(e)throw e;o.push("/auth/login"),l.Am.success("D\xe9connexion r\xe9ussie")}catch(e){l.Am.error("Erreur lors de la d\xe9connexion"),console.error("Error:",e)}};return(0,n.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,n.jsx)("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform ".concat(u?"translate-x-0":"-translate-x-full"," lg:translate-x-0 transition-transform duration-200 ease-in-out"),children:(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsx)("div",{className:"flex items-center justify-center h-16 px-4 bg-blue-600",children:(0,n.jsx)("h2",{className:"text-xl font-semibold text-white",children:"ProAutoServices"})}),(0,n.jsx)("div",{className:"px-4 py-3 bg-gray-50",children:(0,n.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Bonjour ",m]})}),(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)(c,{})}),(0,n.jsx)("nav",{className:"flex-1 px-4 py-4 space-y-1"}),(0,n.jsx)("div",{className:"p-4 border-t",children:(0,n.jsx)("button",{onClick:h,className:"w-full px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"D\xe9connexion"})})]})}),(0,n.jsxs)("div",{className:"lg:pl-64",children:[(0,n.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between h-16 px-4 bg-white shadow-sm",children:[(0,n.jsx)("button",{onClick:()=>d(!u),className:"p-2 text-gray-500 lg:hidden",children:(0,n.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,n.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:t}),(0,n.jsx)("div",{className:"w-6 lg:hidden"})," "]}),(0,n.jsx)("main",{className:"p-4",children:s})]})]})}},9008:function(e,s,t){"use strict";t.d(s,{O:function(){return n}});let n=(0,t(6490).eI)("https://pjxtjkmqgkbisgfleaps.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBqeHRqa21xZ2tiaXNnZmxlYXBzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzYxOTAzMzAsImV4cCI6MjA1MTc2NjMzMH0.UjKK4kSJDapIRx0iJvdHiJZzMbi99tDx52FmSq4qyfE",{auth:{persistSession:!0,autoRefreshToken:!0}})},7078:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return l}});var n=t(5893),i=t(4645),r=t(6530),a=t(8410);function l(){return(0,n.jsx)(r.Z,{allowedRoles:["secretary","admin"],children:(0,n.jsx)(i.Z,{title:"Rendez-vous",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"sm:flex sm:items-center",children:[(0,n.jsxs)("div",{className:"sm:flex-auto",children:[(0,n.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Rendez-vous"}),(0,n.jsx)("p",{className:"mt-2 text-sm text-gray-700",children:"G\xe9rez les rendez-vous des clients."})]}),(0,n.jsx)("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none",children:(0,n.jsx)("button",{type:"button",className:"inline-flex items-center justify-center rounded-md border border-transparent bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 sm:w-auto",children:"Nouveau rendez-vous"})})]}),(0,n.jsx)(a.Z,{})]})})})}}},function(e){e.O(0,[69,574,536,548,410,774,888,179],function(){return e(e.s=2962)}),_N_E=e.O()}]);