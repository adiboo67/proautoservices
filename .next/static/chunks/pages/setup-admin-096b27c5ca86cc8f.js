(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[413],{4689:function(e,s,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/setup-admin",function(){return i(7352)}])},9008:function(e,s,i){"use strict";i.d(s,{O:function(){return t}});let t=(0,i(6490).eI)("https://pjxtjkmqgkbisgfleaps.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBqeHRqa21xZ2tiaXNnZmxlYXBzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzYxOTAzMzAsImV4cCI6MjA1MTc2NjMzMH0.UjKK4kSJDapIRx0iJvdHiJZzMbi99tDx52FmSq4qyfE",{auth:{persistSession:!0,autoRefreshToken:!0}})},7352:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return l}});var t=i(5893),r=i(7294),a=i(9008),n=i(1163);function l(){let[e,s]=(0,r.useState)(!1),[i,l]=(0,r.useState)(""),[d,c]=(0,r.useState)(!1),m=(0,n.useRouter)(),o=async()=>{try{s(!0),l("");let{data:e,error:i}=await a.O.auth.signUp({email:"admin@proautoservices.com",password:"admin123456",options:{data:{role:"admin"}}});if(i)throw i;if(!e.user)throw Error("Erreur lors de la cr\xe9ation du compte");let{data:t,error:r}=await a.O.auth.signInWithPassword({email:"admin@proautoservices.com",password:"admin123456"});if(r)throw r;let{error:n}=await a.O.from("users").insert({id:e.user.id,email:"admin@proautoservices.com",full_name:"Administrateur",role:"admin"});if(n)throw n;c(!0),setTimeout(()=>{m.push("/auth/login")},3e3)}catch(e){console.error("Error creating admin:",e),l(e.message||"Une erreur est survenue")}finally{s(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,t.jsx)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:(0,t.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Configuration du compte administrateur"})}),(0,t.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,t.jsx)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:d?(0,t.jsx)("div",{className:"rounded-md bg-green-50 p-4",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-green-800",children:"Compte administrateur cr\xe9\xe9 avec succ\xe8s"}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-green-700",children:[(0,t.jsx)("p",{children:"Redirection vers la page de connexion..."}),(0,t.jsxs)("p",{className:"mt-1",children:["Email: admin@proautoservices.com",(0,t.jsx)("br",{}),"Mot de passe: admin123456"]})]})]})]})}):(0,t.jsxs)(t.Fragment,{children:[i&&(0,t.jsx)("div",{className:"rounded-md bg-red-50 p-4 mb-4",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Erreur"}),(0,t.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,t.jsx)("p",{children:i})})]})]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-700",children:"Cette page va cr\xe9er un compte administrateur avec les identifiants suivants :"}),(0,t.jsxs)("ul",{className:"mt-2 text-sm text-gray-600 list-disc list-inside",children:[(0,t.jsx)("li",{children:"Email: admin@proautoservices.com"}),(0,t.jsx)("li",{children:"Mot de passe: admin123456"})]})]}),(0,t.jsx)("button",{onClick:o,disabled:e,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:e?"Cr\xe9ation en cours...":"Cr\xe9er le compte administrateur"})]})]})})})]})}}},function(e){e.O(0,[574,774,888,179],function(){return e(e.s=4689)}),_N_E=e.O()}]);